# 研究全体の流れ

## 概要

本研究は、授業評価の自由記述から感情スコアと授業評価スコアの関係性を分析し、授業評価の要因を明らかにすることを目的としている。

---

## 研究の全体フロー

```
1. データ収集・前処理
   ↓
2. 手動ラベリング（1,000件）
   ↓
3. モデル構築
   ├─ 単一タスクモデル（感情分析）
   ├─ 単一タスクモデル（評価スコア予測）
   └─ マルチタスクモデル（感情＋評価スコア）
   ↓
4. 順序回帰モデル構築
   ↓
5. SHAP分析
   ├─ 単一タスクモデルのSHAP分析
   ├─ マルチタスクモデルのSHAP分析
   └─ 順序回帰モデルのSHAP分析
   ↓
6. 結果の解釈・論文執筆
```

---

## 各ステップの詳細

### 1. データ収集・前処理

- **データソース**: 福岡工業大学の授業評価システム（2018-2023年度）
- **データ規模**: 3,268授業
- **データ内容**:
  - 授業評価スコア（択一式質問の点数化による単純平均）
  - 自由記述（2つの質問から構成）

### 2. 手動ラベリング

- **サンプル数**: 1,000件（ランダム抽出）
- **ラベル分類**:
  - ネガティブ: 191件（感情スコア-1）
  - ポジティブ: 180件（感情スコア+1）
  - ニュートラル: 628件（感情スコア0）

### 3. モデル構築

#### 3.1 ベースモデル
- **モデル**: 日本語の事前学習済みBERT
- **Fine-tuning**: 手動ラベリングデータ（1,000件）で微調整

#### 3.2 マルチタスクモデル
- **アーキテクチャ**: BERTエンコーダの共有層から感情分析ヘッドと評価スコアヘッドが分岐
- **目的**: 感情スコアと評価スコアの両方に影響する要因と、それぞれに特有の要因を分離

#### 3.3 順序回帰モデル
- **目的**: 授業評価スコア（1-4点）の順序関係を適切に扱う
- **出力**: 各評価スコアの確率（P1, P2, P3, P4）

### 4. SHAP分析

#### 4.1 単一タスクモデルのSHAP分析
- **分析対象**: 層化サンプリング5,000件
- **結果**: ポジティブ判定に寄与する重要語TOP10を特定
  - 「やす」（SHAP値0.27）が最重要
  - 「良かっ」（0.25）、「おもしろ」（0.24）が続く

#### 4.2 マルチタスク学習のSHAP分析
- **結果**: 4つの要因タイプを特定
  - 共通要因（満足度要因）: 577語彙（18.0%）
  - 感情特化要因: 1,200語彙（37.5%）
  - 評価特化要因: 532語彙（16.6%）
  - 低重要度要因: 889語彙（27.8%）

#### 4.3 順序回帰モデルのSHAP分析（今後の課題）
- **目的**: 授業評価スコアで2点と4点に強く影響する要因を特定
- **分析対象**: P2（2点を減らす要因）とP4（4点を増やす要因）

---

## 主要な発見

1. **理解しやすさと面白さが満足度に大きく寄与**
   - 単一タスクモデルのSHAP分析により明らかになった

2. **共通要因（満足度要因）への投資が最も効率的**
   - マルチタスク学習により、感情スコアと評価スコアの両方に影響する要因を特定
   - 1つの施策で学生満足度と教育効果の両方を向上させることができる

3. **教育改善における投資効果が高い要因**
   - 「学ぶ」「理解」「総括」「推奨」などが共通要因として特定された

---

## 今後の課題

1. **順序回帰モデルのSHAP分析の実施**
   - 授業評価スコアで2点と4点に強く影響する要因を解明

2. **実践への応用**
   - 研究結果を教育現場での授業改善に活用

---

## 関連ファイル

- **研究概要**: `本論/研究概要.md`
- **予稿**: `本論/予稿.tex`
- **データ**: `本論/data/`
- **スクリプト**: `本論/scripts/`
- **結果**: `本論/results/`

---

## ディレクトリ構成との関係

本ディレクトリ（`04_Docs/`）は、研究の全体像を把握するためのドキュメントを格納しています。

- **全体の流れ.md**（このファイル）: 研究の全体フローと各ステップの詳細
- **研究概要.md**（`本論/`）: 予稿.texを基にした研究の概要
- **README.md**（`本論/`）: 本論ディレクトリの構成と使用方法

研究を進める際は、これらのドキュメントを参照しながら、`本論/`ディレクトリに必要なファイルのみを集約して作業を進めます。
