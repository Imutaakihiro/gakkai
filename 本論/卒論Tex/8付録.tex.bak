\chapter{付録}

\section{ランダム効用理論の公理化}
本節では，本文中では詳しく触れていない，ランダム効用最大化行動の公理（Axiom）を示す．
ここでいう公理とは，最も自明（絶対的）な前提のことを指す．

まず，基本的な，確定的環境下における選択を行なう際の効用最大化行動についての公理を示す．
次に確率的環境下における選択を行なう際の公理を示す．
ここでは，期待効用最大化の公理（e.g. Savage\cite{Sav54}, Gilboa\cite{Gil09}）と対応する
Luce の選択公理を示す．そして，そこから本論文と関係が深い I.I.A 特性を導く．
最後に，この確率的な選択を行なう際に，効用関数の仮定をランダムであると仮定する，
ランダム効用理論（仮説）の公理を示す．

選択行動を扱う上では，その行動自身を理論の抽象的な対象として取り扱う必要がある．
この選択行動を選択構造（Choice Structure）と呼ぶ．
この選択構造も上記の選択行動自体の置かれている環境に依存する．

\subsection{確定的な選択における公理}

\begin{difinition}[確定的な選択における選択構造]
選択構造は，$\{({\cal X}, {\bm X}), {\bm Q}, {\bm B}(q), {\bm d}, (q, {\bm C})\}$ と表される．
ここで，$({\bm X},{\cal X})$ は距離空間であり，${\bm X}$ は選択におけるユニバーサル集合，${\cal X}$ は ${\bm X}$ の部分集合の $\sigma$-加法族である．
${\cal Q}$ は非空の添字集合であり，実現可能な選択状況を示す．
${\bm B}(q)$ は，選択状況 $q \in {\bm Q}$ における ${\cal X}$ 上の非空集合であり，選択状況 $q$ における利用可能な予算集合と解釈される．
また，${\bm d}$ は選択ルールもしくは選択関数と呼ばれ，${\bm d}: \forall {\cal X} \in {\bm X}, {\bm d}({\cal X}) \in $ である．
$\bm d$ は 選択ルールと呼ばれ，${\bm B}(q)$ において選択者の受容される選択肢（複数も可）を明示的に示す行動ルールと解釈される．
 $(q,{\bm C})$ は試行と呼ばれ，実現可能な $q \in {\bm Q}$ と集合 ${\bm C}$ で構成される．
\end{difinition}
この定義は，Samuelson (1947) の定義を，確率的な選択への対応を考え，多状況に拡張したものである．

個々人の選択行動をモデリングするのに選択構造を用いるとき，個々人の行動を規定するある種の制約を用いる．
これが，顕示選好の弱公理\cite{Sam47,Nis90}(Weak axiom of revealed preference) である．
\begin{axiom}[顕示選好の弱公理]
選択構造 $\{({\cal X}, {\bm X}), {\bm Q}, {\bm B}(q), {\bm d}, (q, {\bm C})\}$ が与えられ，これが顕示選好の弱公理を満たすとは，
任意の ${\bm B}(q) \subseteq {\cal X} \subseteq {\bm X}(x \in {\bm B}(q))$，$q \in {\cal Q}$ において，$x \in {\bm d}(q)$ であるなら，
いかなる ${\bm B}(q) \subseteq {\cal X} \subseteq {\cal X}(x,y in {\cal X}^{\prime})$，$q^{\prime} \in {\cal Q}$ においても，
\end{axiom}


上記の顕示選好の弱公理は，選好関係について直接定義したものではない．
あくまで，ある選択された状況（顕示された状況）から導かれる選好が合理的であるかということを述べている．

この選好関係について，それ自体を直接定義する方法も存在する．

\begin{axiom}[選好関係]
選好関係 $\succeq$ が合理的であるとは，次の二つの性質を持つことをいう．\newline
 完備性: $\forall x,y \in {\cal N}$, $x \succeq y$ もしくは $y \succeq x$ が成立．\newline
 推移性: $\forall x, y, z \in {\cal N}$, $x \succeq y$ かつ $y \succeq z$ ならば，$x \succeq z$ が成立．
\end{axiom}
このうち，推移性について今後，選択行動自体の置かれている環境により，変化していく．

これら二つの定義はある限られた状況下では等価である．
\begin{proposition}[$\succeq \Rightarrow \succeq^{\ast} $]
合理的選好関係 $\succeq$ を持つ意思決定者が ${\cal B}$ に含まれる予算集合から選択をする際，この意思決定者は，顕示選好の弱公理を満たす選択構造を必ずとる．
\end{proposition}
\begin{proof}
Mas-Colell et al. (1995) p.12 を見よ．
\end{proof}
\begin{proposition}[$\succeq^{\ast} \Rightarrow \succeq $]
選択構造 $({\cal B}, R(\cdots))$ が弱公理を満たし，${\cal B}$ が三つまでの元からなる ${\cal N}$ の全ての部分集合を含むとき，
合理的選好関係 $\succeq$ は ${\cal B}$ に関して $R(\cdots)$ を合理的であるとする，すなわち
\begin{align}
R(B) = R^{\ast} (B, \succeq)~~\forall B \subset {\cal B}.
\end{align}
さらに，この合理的選好関係は唯一のものである．
\end{proposition}
\begin{proof}
Mas-Colell et al. (1995) p.13--14 を見よ．
\end{proof}
弱顕示選好は，限られた場合にしかその顕示された選好が合理的ではないことを意味している．

Houthakker (1950) \cite{Hou50} はこれを多資産下における選択行動に拡張し，顕示された選好が合理的である，より一般的な条件を示している．
\begin{axiom}[顕示選好の弱公理]
選択構造 $({\cal B},R(\cdot ))$ が与えられ，
\begin{align}
x \succeq^{\ast} y \Leftrightarrow \mbox{there is some } B \subset {\cal B} \mbox{ such that } x,y \in B \mbox{ and } x \in C(B)
\end{align}
で定義される顕示選好関係 $\succeq^{\ast}$ が成立するとき，顕示選好の弱公理を満たすという．
\end{axiom}


\subsection{確率的な選択における公理}

\subsection{観測が確率的な場合における選択公理}
本小節では，観測が確率的な場合における選択公理を示す．
前小節では，選択者自身にとって選好関係が確率的であることを仮定していた．
しかし，本小節では，観測者（もしくは観測）という立場を明示的に規定し，選択者（あるいは選択）自体にある種の異質性を仮定し，
これを観測者が観測できないものとする．

観測が確率的な場合における選択構造は，確定的な場合と同様に，弱公理と強公理にわけることができる．
ただし，弱公理と強公理の関係性については，確定的な場合と異なり，明らかではない．
確率的な場合の選択構造は，Marschak (1960) \cite{Mar60}，McFadden (1974) \cite{Mc74}，McFadden (2005)\cite{Mc05} より，次のとおり規定される．

\begin{difinition}[観測が確率的な場合における選択構造]
選択構造は，次のように表される：$\{({\bm X},{\cal X}), {\bm Q}, {\bm B}(q), {\bm d}, (q,{\bm C}), ({\bm D}, {\cal D}, \zeta ), P_q, {\bm t}, {\bm H}, \alpha_{\bm H}(t), U, ({\bm U}, {\cal U}, \nu ),\alpha_{\bm U}(t)\}$．
$({\bm X},{\cal X})$ は距離空間であり，${\bm X}$ は選択におけるユニバーサル集合，${\cal X}$ は ${\bm X}$ の部分集合の$\sigma$ 加法族である．
${\cal Q}$ は非空の添字集合であり，実現可能な選択状況を示す．確定的な場合の取りうる価格に相当する．
${\bm B}(q)$ は，選択状況 $q \in {\bm Q}$ における ${\cal X}$ 上の非空集合であり，選択状況 $q$ における利用可能な選択肢集合と解釈される．確定的な場合の予算集合に相当する．
また，${\bm d}:{\bm Q} \rightarrow {\cal X}$ は選択ルールと呼ばれ，選択状況 ${\bm Q}$ を $\bm X$ の部分集合に射影する写像である．ここで，$ \emptyset \not = R(q) \subseteq {\bm B}(q)$ である．

 $\bm d$ は ${\bm B}(q)$ において選択者の受容される選択肢（複数も可）を明示的に示す行動ルールと解釈される．
 ここで，${\bm d}(q)$ が単集合であるとすると，この選択ルールは決定的（decisive）であるという．
 決定的ではない選択というのは，「結び付けられた」選択肢の集合の要請と解釈される．
 $(q,{\bm C})$ は試行と呼ばれ，実現可能な $q \in {\bm Q}$ と集合 ${\bm C}$ で構成される．この試行が「成功（失敗）」であるとは，ある個人が状況 $q$ において行なった選択 ${\bm d}(q)$ が集合 ${\bm C}$ に包含される（排除される）ことである．
 試行が「部分的成功」であるとは，${\bm d}(q)$ が ${\bm C}$ と交わるが，${\bm C}$ を包含しないことをいう．
 $({\bm D}, {\cal D}, \zeta )$ は確率空間であり，選択ルールの集合 $\bm D$，${\bm D}$ の可測部分集合である $0,1$ の $\sigma$ 加法族，そして${\cal D}$ 上の確率 $zeta$ で構成される．
 この確率空間は，選択者が属する集団において出現しうる意思決定ルールのユニバースと解釈できる．
 
$P_q$ は選択状況 $q \in {\bm Q}$ における $\cal X$ 上の選択確率である．$P_q({\bm C})$ は ${\bm C} \in {\cal X}$ に関して選択ルールが ${\bm D}(q) \subseteq {\bm C}$ を満たす個人の割合を表わす．
代数 $\cal D$ は 選択状況 $q \in {\bm Q}$ において，集合：${\bm D}(q, {\bm C})=\{{\bm d} \in {\bm D}| {\bm d}(q) \subseteq {\bm C} \}$ を包含する．
すなわち試行が成功である確率は，$\P_q({\bm C}):=\zeta({\bm D}(q,{\bm C}))$ と定義される．
また，$P_q({\bm B}(q))=1$ を満たし，ある集団の意思決定ルールがほとんど確実であるならば， $P_q({\bm C}) + P_q({\bm C}^C)$ を満たす．
より一般的には，$P_q^{-},~P_q^{+}$ をそれぞれ $q \in {\bm Q}$ において
\begin{align}
P_q^{-}({\bm C}) \leq \zeta ({\bm D}(q, {\bm C})) \leq P_q^{+}({\bm C})
\end{align}
を満たす制約の下限，上限とする．
${\bm t}=<(q_1, {\bm C}_1),\dots,(q_s, {\bm C}_s)>$ は試行列であり，反復が認められた順序列である．ここで，要素は $(q_i, {\bm C}_i \in {\bm Q}) \times {\cal X}~{\rm for}~i=1,\dots, m$ であり，$m$ は正の整数である．

$\bm H$ は $\bm D$ における選択関数の集合であり，ある合理的選択仮説に整合的な選択関数と解釈される． 
代数 $\cal D$ は $\bm H$ を包含するため，$q \in {\bm Q}$，${\bm C} \in {\cal X}$ において集合 ${\bm H}(q,{\bm C}) = {\bm D}(q,{\bm C})\cap {\bm H}$ は $0,1$ の $\sigma$ 加法族 ${\cal H} = \{ {\bm A}\cap {\bm H}|{\bm A} \in {\cal D}\}$ に包含される．
また，$\zeta({\bm H}(q,{\bm C}))$ は合理的選択仮説を満たす選択ルールにとって試行 $(q,{\bm C})$ が成功である確率として定義される．
$\alpha_{\bm H}(t)$ は 試行 $\bm t$ において $\bm U$ と交わる数であり，$\bm H$ に含まれる選択関数によって得られる列の最大成功数として定義される：
\begin{align}
\alpha_{\bm H}(t) := \max \limits_{d \in {\bm H}} \sum_{i=1}^{s} \1_{\{ {\bm d}(q_i) \subseteq {\bm C}_i\}}.
\end{align}

$U$ は${\bm X} \rightarrow \mathbb{R}$ なる $\bm X$ 上の効用関数であり，選好の順序を示す．
${\bm d}(q) = {\bm d}(q;U):=\{x \in {\bm B}(q)|U(x)\geq U(x^{\prime})~\forall x^{\prime} \in {\bm B} (q)\}$ が $q \in  {\bm Q}$ において非空であるとき，効用関数 $U$ は弱決定的（Weakly decisive）である．
そして，${\bm d}(q;U)$ が $q \in {\bm Q}$ において単集合のとき，決定論的（decisive）である．
$({\bm U}, {\cal U}, \nu )$ は距離空間であり，合理的選択行動仮説により特定される効用関数 $U$ の非空の集合であり，ランダム効用最大化モデルと呼ばれる．
ここで，$\cal U$ は$\bm U$ の$\sigma$加法族であり，$\nu$ は$\cal U$ 上の確率を表わす．
選択ルール空間 $({\bm H},H,\zeta)$ が効用関数空間 $({\bm U}, {\cal U}, \nu )$ と整合的である（もしくは選択ルール集合 $\bm H$ が $\bm U$ 合理的である）とは，それぞれの $U \in {\bm U}$ が弱決定論的であり，
それぞれの $d \in {\bm H}$ がある $U \in {\bm U}$ 及び $q \in {\bm Q}$ において ${\bm d}(q;U)$ という形をとるとき，${\bm H}(q,{\bm C})$ の逆写像が $q \in {\bm Q},|{\bm C} \in {\cal X}$において ${\cal U}$ に存在し
（i.e., ${\bm U}(q,{\bm C}):=\{U \in {\bm U}| {\bm d}(q;U) \subseteq {\bm C} \in {\cal U} \}$)，$\zeta({\bm H} (q, {\bm C}))=\nu({\bm U}(q,{\bm C}))$ となることをいう．
$\alpha_{\bm U}(t)$ は試行 $\bm t$ において $\bm U$ と交わる数であり，$\bm U$ に含まれる効用関数によって得られる最大成功数と定義される：
\begin{align}
\alpha_{\bm U}(t):= \max \limits_{U \in {\bm U}} \sum_{i=1}^{s} \1_{\{ {\bm d}(q_i) \subseteq {\bm C}_i\}}.
\end{align}
選択ルール空間 $\bm H$ と効用関数空間 $\bm U$ が整合的であるとは，選択ルールと効用関数の交差数が等しくなることである．
\end{difinition}

この定義のもとで，次の二つの問題を考える．

\begin{description}
\item [顕示分布問題] $P_q$ を $q \in {\bm Q}$ における ${\cal X}$ 上の確率であるとき，$P_q({\bm C}) = \zeta({\bm H}(q, {\bm C}))$ for ${\bm C} \in {\cal X},~q \in {\bm Q}$ となる ${\cal H}$ 上の確率 $\zeta$ を見つける問題．
代わりに，$P_q({\bm C})=\nu({\bm U}(q, {\bm C}))$ for ${\bm C} \in {\cal X},~q \in {\bm Q}$ となる $\cal U$ 上の確率 $\nu$ を見つけるでもよい．
\item [顕示結果の優位分布問題]
$P_q^{-},~P_q^{+}$ を $q \in {\bm Q}$ における ${\cal X}$ 上の非負制約の関数であるとき，$P_q^{-} ({\bm C}) \leq \zeta({\bm H}(q, {\bm C})) \leq P_q^{+} ({\bm C}) $ for ${\bm C} \in {\cal X},~q \in {\bm Q}$ となる ${\cal H}$ 上の確率 $\zeta$ を見つける問題．
代わりに，$P_q^{-}({\bm C}) \leq \nu({\bm U}(q, {\bm C})) \leq P_q^{+} $ for $ {\bm C} \in {\cal X}$, $q \in {\bm Q}$ なる $\cal U$ 上の確率 $\nu$ を見つけるでもよい．
\end{description}

さて，公理を具体的に示そう．
確定的な場合と同様に，弱公理\cite{BDK99, BDK02, BDK04, DP07}，強公理\cite{McF05}が存在する．ただし，弱公理と強公理の関係性は未だに示されていない．
本研究では，効用関数の最大化及び任意の選択肢数を仮定するため，強公理を示す．

\begin{axiom}[確率的顕示選好の強公理]
仮説付けされたクラス $\bm H$ もしくは代わりに 仮説付けされた効用関数のクラス $\bm U$ が存在し，${\bm C}_i \in {\cal X}$ かつ $q_i \in {\bm Q}$ で構成される試行 $t=<(q_1,{\bm C}_1),\dots,(q_s, {\bm C}_s)>$ 
の有限の列があるとき，
\begin{align}
\sum_{i=1}^{m} P_{q_i} (\bm C_i) \leq \alpha_{\bm H} ({\bm t}) = \max \limits_{ d \in {\bm H}} \sum_{i=1}^{m} \1_{\{ {\bm d}(q_i) \subseteq {\bm C}_i\}}.
\end{align}
もしくは，
\begin{align}
\sum_{i=1}^{m} P_{q_i} (\bm C_i) \leq \alpha_{\bm U} ({\bm t}) = \max \limits_{ U \in {\bm U}} \sum_{i=1}^{m} \1_{\{ {\bm d}(q_i ; U) \subseteq {\bm C}_i\}}.
\end{align}
\end{axiom}