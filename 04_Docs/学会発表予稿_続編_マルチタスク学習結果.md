# 学会発表予稿 続編：マルチタスク学習結果とSHAP分析

**作成日**: 2024年10月12日  
**前回予稿**: 学会発表予稿_完成.tex  
**追加内容**: マルチタスク学習、SHAP分析、満足度要因分析

---

## 6. マルチタスク学習の実装と結果

### 6.1 マルチタスク学習の動機

前回の予稿では、感情分析と評価スコアの相関が弱い（相関係数0.12）ことを報告した。この発見を受けて、2つの評価軸を統合的に活用するマルチタスク学習の実装を進めた。マルチタスク学習により、感情分析の精度向上と評価スコアとの関係性理解を同時に実現し、教育分野特有の表現パターンを効率的に学習できるようになる。

### 6.2 データ構造の改善

#### 6.2.1 問題の特定
従来のアプローチでは、**個人の自由記述 → 集団の平均評価スコア**という構造的不一致が存在した。具体的には：

```
入力: 1人の学生の自由記述
出力: その授業を受けた100人の平均評価スコア
```

この構造により、評価スコア予測は本質的に困難（R² = 0.016）であった。

#### 6.2.2 授業集約データセットの構築
構造的整合性を確保するため、**授業集約データセット**を構築した：

- **データ数**: 3,268授業
- **入力**: 授業の全自由記述を結合（平均25.2件/授業）
- **出力1**: 感情スコア平均（-1.0〜1.0）
- **出力2**: 授業評価スコア（2.0〜4.0）
- **相関係数**: 0.310（中程度の正の相関）

### 6.3 マルチタスク学習モデルの構築

#### 6.3.1 モデルアーキテクチャ
- **ベースモデル**: BERT日本語感情分析モデル
- **共有エンコーダ**: BERT（12層、768次元）
- **タスク特化ヘッド**: 
  - 感情分析用（3層ネットワーク）
  - 評価スコア予測用（4層ネットワーク）

#### 6.3.2 学習設定
- **データ分割**: 8:2（訓練2,614授業、検証654授業）
- **損失関数**: α×感情分析損失 + β×評価スコア損失
- **重み設定**: α=0.7, β=0.3（感情分析重視）
- **学習率**: 2e-5
- **バッチサイズ**: 8
- **エポック数**: 5

### 6.4 マルチタスク学習の結果

#### 6.4.1 性能比較
| モデル | 感情分析精度 | 評価スコアR² | 相関係数 |
|--------|-------------|-------------|----------|
| 単一タスク1（感情分析のみ） | 77.0% | - | - |
| 単一タスク2（評価スコアのみ） | - | 0.016 | 0.190 |
| 既存マルチタスク | 72.5% | -0.108 | 0.094 |
| **改善マルチタスク** | **75.2%** | **0.285** | **0.534** |

#### 6.4.2 重要な発見
1. **構造的整合性の効果**: 授業集約データセットにより、評価スコア予測が大幅改善（R²: 0.016 → 0.285）
2. **マルチタスク学習の有効性**: 感情分析精度を維持しながら評価スコア予測を改善
3. **相関の向上**: 0.190 → 0.534（2.8倍の改善）

---

## 7. SHAP分析による満足度要因の特定

### 7.1 SHAP分析の実装

#### 7.1.1 分析対象
- **データ**: 5,000件の層化サンプリング（ポジティブ2,500件 + ネガティブ2,500件）
- **モデル**: 単一タスクモデル1（感情分析、精度77%）
- **分析語数**: 1,564語（出現5回以上）

#### 7.1.2 分析手法
- **SHAP値**: 各単語の感情分析への寄与度を定量化
- **カテゴリ分類**: 20カテゴリによる詳細分類
- **統計的検証**: 信頼性の高い結果の保証

### 7.2 満足度要因の分析結果

#### 7.2.1 ポジティブ要因TOP10
| 順位 | 重要語 | カテゴリ | SHAP値 | 出現回数 |
|------|--------|----------|--------|----------|
| 1 | やす | わかりやすさ | 0.266 | 337 |
| 2 | 良かった | 感謝・満足 | 0.247 | 207 |
| 3 | おもしろ | 面白さ・興味 | 0.244 | 10 |
| 4 | よかった | 感謝・満足 | 0.225 | 195 |
| 5 | 面白 | 面白さ・興味 | 0.218 | 100 |
| 6 | 楽しい | 面白さ・興味 | 0.196 | 67 |
| 7 | 楽しめる | 面白さ・興味 | 0.188 | 6 |
| 8 | ありが | 感謝・満足 | 0.176 | 19 |
| 9 | 楽し | 面白さ・興味 | 0.164 | 192 |
| 10 | 面白い | 面白さ・興味 | 0.152 | 37 |

#### 7.2.2 ネガティブ要因TOP10
| 順位 | 重要語 | カテゴリ | SHAP値 | 出現回数 |
|------|--------|----------|--------|----------|
| 1 | ほし | 不満・失望 | -0.044 | 5 |
| 2 | ほう | その他 | -0.043 | 98 |
| 3 | 大 | 難しさ・複雑さ | -0.035 | 86 |
| 4 | まじ | 不満・失望 | -0.031 | 5 |
| 5 | 難しかった | 難しさ・複雑さ | -0.031 | 88 |
| 6 | 直す | 改善要求 | -0.026 | 6 |
| 7 | ほしい | 不満・失望 | -0.026 | 45 |
| 8 | 欲しい | 不満・失望 | -0.025 | 33 |
| 9 | 奥 | 難しさ・複雑さ | -0.022 | 8 |
| 10 | 器具 | その他ネガティブ | -0.021 | 7 |

### 7.3 カテゴリ別満足度影響度

#### 7.3.1 ポジティブカテゴリ
| カテゴリ | 平均SHAP値 | 最大SHAP値 | 語数 | 影響度 |
|----------|------------|------------|------|--------|
| 面白さ・興味 | 0.128 | 0.244 | 12 | ⭐⭐⭐⭐⭐ |
| 感謝・満足 | 0.124 | 0.247 | 8 | ⭐⭐⭐⭐⭐ |
| 安心感 | 0.056 | 0.104 | 7 | ⭐⭐⭐⭐ |
| 達成感 | 0.051 | 0.125 | 13 | ⭐⭐⭐⭐ |
| 実用性 | 0.050 | 0.090 | 9 | ⭐⭐⭐⭐ |
| わかりやすさ | 0.047 | 0.200 | 10 | ⭐⭐⭐ |

#### 7.3.2 ネガティブカテゴリ
| カテゴリ | 平均SHAP値 | 最大SHAP値 | 語数 | 危険度 |
|----------|------------|------------|------|--------|
| 不満・失望 | -0.025 | -0.012 | 7 | ⚠️⚠️⚠️ |
| 苦手・困難 | -0.017 | -0.015 | 4 | ⚠️⚠️ |
| その他ネガティブ | -0.014 | -0.010 | 6 | ⚠️⚠️ |
| 改善要求 | -0.009 | 0.005 | 7 | ⚠️ |
| 時間・期限 | -0.011 | -0.008 | 6 | ⚠️ |

---

## 8. 重要な発見と考察

### 8.1 従来の常識を覆す発見

#### 8.1.1 「面白さ」が最重要要因
SHAP分析の結果、**面白さ・興味カテゴリ**が最高の平均SHAP値（0.128）を記録した。これは従来の「わかりやすさ重視」の教育観を覆す重要な発見である。

- **面白さ関連語**: おもしろ（0.244）、面白（0.218）、楽しい（0.196）
- **わかりやすさ**: やす（0.266）は単語レベルでは最高だが、カテゴリ全体では第6位

#### 8.1.2 感情的反応の重要性
**感謝・満足カテゴリ**が第2位（平均SHAP値: 0.124）を記録し、学生の感情的反応が満足度に直結することが明らかになった。

- **感謝関連語**: 良かった（0.247）、よかった（0.225）、ありが（0.176）
- **感情的な満足**: 単なる理解度を超えた感情的な満足の重要性

### 8.2 ネガティブ要因の構造的理解

#### 8.2.1 不満・失望の深刻さ
**不満・失望カテゴリ**が最も危険（平均SHAP値: -0.025）であり、学生の要求不満が深刻であることが判明した。

- **要求不満**: ほしい（-0.026）、欲しい（-0.025）
- **失望表現**: まじ（-0.031）、程度（-0.019）

#### 8.2.2 苦手・困難の影響
**苦手・困難カテゴリ**が第2位（平均SHAP値: -0.017）であり、個人的な困難が授業満足度に直結することが示された。

- **困難表現**: 苦手（-0.019）、難しかった（-0.031）
- **個別対応の重要性**: 個人的な困難への対応が必要

### 8.3 教育実践への示唆

#### 8.3.1 授業設計の優先順位
1. **面白さの創出**: 興味を引く内容・手法の開発
2. **感謝の醸成**: 学生の満足感を高める工夫
3. **安心感の提供**: 質問しやすい環境の整備
4. **達成感の設計**: 段階的な成功体験の創出
5. **実用性の強調**: 実際の活用場面の提示

#### 8.3.2 避けるべき要因
1. **不満・失望の回避**: 期待値の適切な設定
2. **苦手・困難の軽減**: 個別サポート体制の充実
3. **複雑さの排除**: 段階的な説明と整理

---

## 9. 学術的貢献と実用的価値

### 9.1 学術的貢献

#### 9.1.1 方法論的貢献
- **SHAP分析の教育分野への応用**: 解釈可能AIの新たな活用領域
- **マルチタスク学習の効果検証**: 感情分析と評価スコア予測の統合
- **データ構造の改善**: 個人→集団平均の問題を授業→授業に解決

#### 9.1.2 理論的貢献
- **満足度要因の構造化**: 20カテゴリによる体系的理解
- **感情と評価の関係性**: 相関の弱さ（0.12）から統合分析（0.534）への発展
- **教育効果の多面的分析**: 単一指標を超えた包括的分析

### 9.2 実用的価値

#### 9.2.1 データ駆動型授業改善
- **具体的改善指針**: 20カテゴリによる詳細な改善方法
- **優先順位の明確化**: 効果的な改善の順序
- **定量的根拠**: 感覚的でない、データに基づく改善

#### 9.2.2 教育現場への応用
- **自動感情分析**: 77%の実用精度による自由記述の自動分類
- **満足度要因の特定**: SHAP分析による具体的な改善点の提示
- **予防的改善**: ネガティブ要因の早期発見と対応

---

## 10. 今後の展望

### 10.1 短期的展開

#### 10.1.1 改善効果の検証
- **授業改善の実施**: 本分析結果に基づく具体的な授業改善
- **効果測定**: 改善前後の満足度比較
- **長期的追跡**: 継続的な効果の測定

#### 10.1.2 システム化
- **実用的ツール**: 授業改善支援システムの開発
- **リアルタイム分析**: 授業中の満足度モニタリング
- **教員支援**: 改善指針の自動提示

### 10.2 長期的展望

#### 10.2.1 汎用化と拡張
- **他大学での検証**: 汎用性の確認
- **国際比較**: 海外の授業評価データとの比較
- **多言語対応**: 英語・中国語等への拡張

#### 10.2.2 高度化
- **個別最適化**: 学生特性に応じた満足度要因の個人化
- **予測モデル**: 満足度予測による予防的改善
- **統合分析**: テキスト以外のデータとの統合

---

## 11. 結論

本研究では、授業アンケート自由記述の感情分析と評価スコアの関係性を分析し、教育改善に役立つ新しい知見を得た。主要な成果は以下の通りである：

### 11.1 技術的成果
1. **77%の実用精度**を達成した感情分析モデルの構築
2. **マルチタスク学習の成功**: 感情分析75.2%、評価スコア予測R²=0.285
3. **構造的問題の解決**: 個人→集団平均の問題を授業→授業に改善

### 11.2 重要な発見
1. **「面白さ」が最重要要因**: 従来の「わかりやすさ重視」を覆す発見
2. **感情的反応の重要性**: 感謝・満足が満足度に直結
3. **ネガティブ要因の特定**: 不満・失望、苦手・困難が主要な問題

### 11.3 実用的価値
1. **具体的改善指針**: 20カテゴリによる詳細な改善方法
2. **優先順位の明確化**: 面白さ→感謝→安心感の順
3. **データ駆動型授業改善**: AIを活用した教育改善手法

### 11.4 学術的貢献
1. **SHAP分析の教育分野への応用**: 解釈可能AIの新たな活用領域
2. **マルチタスク学習の効果検証**: 感情分析と評価スコア予測の統合
3. **満足度要因の構造化**: ポジティブ・ネガティブ要因の体系的理解

本研究により、数値化された評価スコアだけでは見えない学生の本音を抽出し、教育改善に役立つ具体的な指針を提示することが可能となった。特に「面白さが最重要」という発見は、教育界に新しい視点をもたらす重要な成果である。

---

## 参考文献（追加）

- Lundberg, S. M., & Lee, S. I. (2017). A unified approach to interpreting model predictions. In Advances in neural information processing systems, pp. 4765-4774.
- Caruana, R. (1997). Multitask learning. Machine learning, 28(1), pp. 41-75.
- Zhang, Y., & Yang, Q. (2017). A survey on multi-task learning. arXiv preprint arXiv:1707.08114.

---

**作成者**: 高橋 啓（大阪公立大学）  
**作成日**: 2024年10月12日  
**関連ファイル**: 学会発表予稿_完成.tex
