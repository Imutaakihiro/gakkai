# 今後の研究計画（方針A: 感情分析に全振り）

**決定日:** 2025年10月11日  
**方針:** 感情分析（単一タスクモデル1）を研究の中心に据える

---

## 🎯 研究の核心

### メインテーマ
```
授業評価の自由記述における感情分析と
SHAP分析による満足度要因の特定
```

### 成果
- ✅ 感情分析: **Accuracy 77%**（実用レベル）
- ✅ SHAP分析: 満足度を高める要素の特定
- ✅ 実用的価値: 教員への具体的フィードバック

---

## 📋 完了したフェーズ（振り返り）

### ✅ フェーズ1: データセット準備
- 1,000件の手動ラベリング
- 訓練/検証データの分割

### ✅ フェーズ2: 3つのモデル構築
- 単一タスクモデル1（感情）: Accuracy 77%
- 単一タスクモデル2（評価スコア）: R² 0.016
- マルチタスクモデル: Accuracy 72.5%, R² -0.108

### ✅ フェーズ3: モデル性能比較
- 感情分析: 単一タスクが優位（77% > 72.5%）
- 評価スコア予測: 両方とも困難（R²≈0）
- 詳細な比較レポート完成

**進捗率: 50%完了！**

---

## 🚀 今後のフェーズ（詳細計画）

### フェーズ4: SHAP分析実装 🔍

**目的:** モデルの判断根拠を可視化し、満足度要因を特定

#### タスク4.1: SHAP分析スクリプトの作成（0.5日）

**実装内容:**
```python
analyze_sentiment_shap.py
├── モデルとデータのロード
├── SHAP Explainerの作成
├── 全検証データ（200件）でSHAP値を計算
├── 単語ごとに集計
└── 結果を保存（JSON）
```

**成果物:**
- `shap_global_results.json` - 全体の重要語データ
- `shap_individual_examples.json` - 個別事例

---

#### タスク4.2: 全体傾向の分析（1日）

**分析内容:**

1. **ポジティブ判定に寄与する重要語TOP20**
   ```
   満足度を高める要素:
   1. わかりやすい  +0.42
   2. 楽しい        +0.38
   3. 面白い        +0.35
   ...
   ```

2. **ネガティブ判定に寄与する重要語TOP20**
   ```
   不満の原因:
   1. つまらない    -0.45
   2. 難しすぎる    -0.42
   3. わかりにくい  -0.40
   ...
   ```

3. **ニュートラル判定の特徴語**
   ```
   中立的評価の特徴:
   - 普通
   - まあまあ
   - 特に〜ない
   ```

**成果物:**
- 重要語ランキング表（Excelまたは表形式）
- 統計サマリー

---

#### タスク4.3: 可視化（1日）

**作成する図表:**

1. **図1: 重要語ランキング（棒グラフ）**
   - ポジティブ方向TOP20
   - ネガティブ方向TOP20

2. **図2: ワードクラウド**
   - ポジティブ語のクラウド
   - ネガティブ語のクラウド

3. **図3: 個別事例のSHAP可視化**
   - ポジティブ事例3件
   - ネガティブ事例3件
   - ニュートラル事例2件

4. **図4: クラス別ヒートマップ**
   - 単語 × クラスの重要度

**成果物:**
- 高解像度PNG（300dpi、卒論用）
- 各図のキャプション案

---

#### タスク4.4: 誤分類事例の分析（0.5日）

**分析内容:**
```
正解: ポジティブ、予測: ニュートラル
→ なぜ間違えた？
→ SHAPで見ると、どの単語が判断を揺るがせた？

具体例5件を詳細分析
```

**成果物:**
- 誤分類パターンの分類
- 代表的な誤分類事例の説明

**所要時間:** 合計2-3日

---

### フェーズ5: 結果分析と実用提案 📈

**目的:** SHAP分析結果から実用的知見を抽出

#### タスク5.1: 満足度要因の整理（0.5日）

**分析内容:**

1. **教授法に関する要因**
   ```
   ポジティブ:
   - わかりやすい説明
   - 丁寧な指導
   - 具体的な例示
   
   ネガティブ:
   - わかりにくい説明
   - 早すぎる進度
   - 抽象的すぎる内容
   ```

2. **授業内容に関する要因**
   ```
   ポジティブ:
   - 面白い/興味深い
   - 実用的
   - 役立つ
   
   ネガティブ:
   - つまらない
   - 意味がない
   - 退屈
   ```

3. **授業環境に関する要因**
   ```
   ポジティブ:
   - 楽しい雰囲気
   - 充実した時間
   
   ネガティブ:
   - 大変
   - きつい
   ```

---

#### タスク5.2: 教員へのフィードバック作成（0.5日）

**成果物:**
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
授業改善のための具体的提案
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【最優先】わかりやすさの向上
- SHAP値: +0.42（最重要要因）
- 提案: 説明の構造化、図解の活用、例示の充実

【重要】楽しさ・興味の喚起
- SHAP値: +0.38
- 提案: 実例の導入、双方向的な授業展開

【避けるべき】難易度の不適切性
- SHAP値: -0.42
- 提案: 段階的な難易度設定、補助資料の提供
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

#### タスク5.3: 具体例の抽出（0.5日）

**良い予測の例:**
```
入力: "先生の説明がわかりやすく、楽しく学べた"
予測: ポジティブ（確率 92%）← 正解！
重要語: わかりやすく(+0.45), 楽しく(+0.38)
```

**悪い予測の例:**
```
入力: "授業は普通だが、テストが難しい"
予測: ニュートラル（確率 55%）
正解: ネガティブ
分析: "普通"(+0.38)が強く働き、"難しい"(-0.42)を打ち消した
```

**所要時間:** 合計1-2日

---

### フェーズ6: 結果まとめ 📝

**目的:** 実験結果と分析を整理

#### タスク6.1: 結果の統合（1日）

- すべての表・グラフの整理
- 章ごとの図表配置計画
- 数値データの再確認

#### タスク6.2: 発見事項のリスト化（0.5日）

**リスト例:**
```
主要な発見:
1. 感情分析で77%の精度を達成
2. 評価スコア予測の本質的困難性を発見
3. マルチタスク学習のトレードオフを実証
4. 満足度を高める要因を特定（わかりやすさ、楽しさ）
5. 不満の原因を特定（つまらない、難しすぎる）
```

**所要時間:** 合計1-2日

---

### フェーズ7: 卒論執筆 📚

**目的:** 最終的な論文の完成

#### 推奨章構成

```
1. 序論（2-3ページ）
   1.1 研究背景
   1.2 研究目的
   1.3 本論文の構成

2. 関連研究（3-4ページ）
   2.1 授業評価の自動分析
   2.2 感情分析の応用
   2.3 マルチタスク学習
   2.4 説明可能AI（SHAP）

3. 提案手法（4-5ページ）
   3.1 データセット
   3.2 ベースモデル
   3.3 単一タスクモデル
   3.4 マルチタスクモデル

4. 実験（5-6ページ）
   4.1 実験設定
   4.2 評価指標
   4.3 実験結果
       4.3.1 単一タスクモデル1（感情）← メイン
       4.3.2 単一タスクモデル2（評価スコア）
       4.3.3 マルチタスクモデル
   4.4 モデル性能比較

5. 感情分析の詳細分析（8-10ページ）← 核心部分
   5.1 SHAP分析による解釈
       5.1.1 全体傾向
       5.1.2 重要語の特定
       5.1.3 クラス別分析
   5.2 誤分類分析
   5.3 実用化への提案
       5.3.1 教員へのフィードバック
       5.3.2 授業改善の具体的示唆

6. 考察（5-6ページ）
   6.1 評価スコア予測の困難性
       → データ構造の問題
   6.2 マルチタスク学習の効果と限界
       → タスク干渉の観察
   6.3 感情分析の実用的価値
       → 教育現場への応用
   6.4 研究の限界と今後の課題

7. 結論（1-2ページ）
   7.1 研究のまとめ
   7.2 主要な発見
   7.3 今後の展望

参考文献
付録（必要に応じて）
```

**総ページ数:** 30-40ページ程度

**所要時間:** 1-2週間（執筆に集中すれば）

---

### フェーズ8: プレゼン準備 🎤

**目的:** 研究発表の準備

#### スライド構成案（10-15枚）

```
1. タイトル・自己紹介
2. 研究背景・目的
3. データセット紹介
4. 手法: 3つのモデル
5. 実験結果（感情分析）← メイン
6. SHAP分析結果（重要語）← メイン
7. 実用的提案
8. 評価スコア予測の困難性
9. マルチタスク学習の比較
10. 考察・結論
11. 今後の展望
12. 質疑応答
```

**所要時間:** 2-3日

---

## 📅 タイムライン（スケジュール案）

### 今後2週間の計画

```
Week 1:
月: フェーズ4開始 - SHAP分析スクリプト作成
火: SHAP実行（全データ）
水: 可視化作成
木: 誤分類分析
金: フェーズ5 - 結果分析開始

Week 2:
月: 教員フィードバック作成
火: フェーズ6 - 結果まとめ
水: フェーズ7 - 卒論執筆開始
木: 執筆継続
金: 執筆継続

Week 3-4:
卒論執筆完成
プレゼン準備
```

---

## 🎯 次の immediate アクション（今日〜明日）

### 1. SHAP分析スクリプトの作成

```python
analyze_sentiment_shap.py
├── モデルロード
├── データロード（検証200件）
├── SHAP分析実行
├── 結果の集計
└── 保存
```

**所要時間:** 30分〜1時間

---

### 2. 試験実行（小規模）

```python
# まず10件だけで試す
test_texts = val_df['text'].head(10).tolist()
shap_values = explainer(test_texts)
shap.plots.text(shap_values[0])
```

**確認事項:**
- ✅ SHAPが動くか
- ✅ 日本語が正しく表示されるか
- ✅ 意味のある結果が出るか

**所要時間:** 15分

---

### 3. 本番実行（全データ）

```python
# 全200件で実行
all_texts = val_df['text'].tolist()
shap_values = explainer(all_texts)
```

**所要時間:** 30分〜1時間（CPUの場合）

---

## 📊 期待される成果物

### 2週間後に完成するもの

```
03_分析結果/SHAP分析/
├── sentiment_shap_global.json          # 全体傾向（重要語）
├── sentiment_shap_positive_top20.png   # ポジティブ重要語
├── sentiment_shap_negative_top20.png   # ネガティブ重要語
├── sentiment_shap_wordcloud_pos.png    # ワードクラウド（ポジ）
├── sentiment_shap_wordcloud_neg.png    # ワードクラウド（ネガ）
├── sentiment_shap_examples/            # 個別事例
│   ├── positive_example_1.png
│   ├── positive_example_2.png
│   ├── negative_example_1.png
│   └── misclassification_1.png
└── shap_analysis_report.md             # 分析レポート
```

---

## 🎓 卒論の最終イメージ

### タイトル案

```
1. 「授業評価自由記述の感情分析とSHAPによる満足度要因の特定」

2. 「BERTを用いた授業評価の感情分析と解釈可能性の検証」

3. 「マルチタスク学習による授業評価分析の試みと感情分析への応用」
```

### アブストラクト案

```
本研究では、授業評価の自由記述テキストに対して、
BERT（Bidirectional Encoder Representations from Transformers）を
用いた感情分析を実施し、SHAP（SHapley Additive exPlanations）
分析により学生満足度に寄与する要因を特定した。

1,000件の手動ラベリングデータを用いてファインチューニングした
結果、単一タスクモデルでAccuracy 77%を達成した。
また、マルチタスク学習との比較実験により、タスク間干渉の影響を
実証的に示した。

SHAP分析の結果、「わかりやすさ」（SHAP値 +0.42）と
「楽しさ」（+0.38）が満足度向上の主要因であることが明らかになり、
教育実践への具体的示唆を得た。

さらに、評価スコア予測の困難性を分析し、個人の記述から
集団の平均を予測することの本質的限界を明らかにした。
```

---

## ✅ 成功の定義

### この研究が成功と言えるポイント

1. ✅ **実用的な精度**: Accuracy 77%
2. ✅ **解釈可能**: SHAP分析で根拠を示す
3. ✅ **実用的価値**: 教員へのフィードバック
4. ✅ **学術的貢献**: 
   - 個人→集団予測の限界を実証
   - マルチタスク学習のトレードオフを観察
5. ✅ **再現可能**: コード・データ・設定を明示

---

## 🚀 最初の一歩

**今すぐやること:**

SHAP分析スクリプトを作成しましょう！

作成しますか？😊

**所要時間:** 30分で完成

