# 論文執筆テンプレート（順序回帰モデル）

**作成日**: 2025年1月14日  
**目的**: 0から論文を書き始めるためのテンプレート

---

## 📋 論文の基本構成（IMRAD形式）

1. **Introduction（はじめに）**
2. **Methods（研究方法）**
3. **Results（実験結果）**
4. **And Discussion（考察）**

---

## 第1章 はじめに

### 1.1 研究の背景

**ここにあなたが書いた内容を貼り付けてください**

---

### 1.2 研究の目的

**ここにあなたが書いた内容を貼り付けてください**

---

## 第2章 関連研究

### 2.1 自然言語処理と感情分析

**ここにあなたが書いた内容を貼り付けてください**

---

### 2.2 マルチタスク学習

**ここにあなたが書いた内容を貼り付けてください**

---

### 2.3 順序回帰

**ここにあなたが書いた内容を貼り付けてください**

---

## 第3章 研究方法

### 3.1 データセット

**ここにあなたが書いた内容を貼り付けてください**

#### データの概要
- 総データ数: 3,268授業
- 自由記述数: [データを確認]
- 評価スコア: 1～4の4段階評価
- 感情スコア: [データを確認]

---

### 3.2 モデル構成

#### 3.2.1 従来のマルチタスク学習

**ここにあなたが書いた内容を貼り付けてください**

- **入力**: 授業の全自由記述（集団レベル）
- **タスク1**: 感情スコア平均（回帰）
- **タスク2**: 授業評価スコア（回帰、連続値、1～4の範囲）
- **課題**: 
  - 評価スコアを連続値として扱うため、順序性が考慮されていない
  - 1と4の誤りが同じ重み（順序性を無視）
  - タスク間干渉による性能低下
  - **2点がどのような要因があるか**と**4点がどのような要因があるか**を区別できない

---

#### 3.2.2 順序回帰モデル（マルチタスク学習の改善版）

**ここにあなたが書いた内容を貼り付けてください**

- **入力**: 授業の全自由記述（集団レベル）
- **タスク1**: 感情スコア平均（回帰、補助情報）
- **タスク2**: 評価スコアの確率分布（順序回帰、主目的）
  - P1: 低評価確率（スコア1）
  - P2: 中低評価確率（スコア2）
  - P3: 中高評価確率（スコア3）
  - P4: 高評価確率（スコア4）
- **期待値計算**: E[y] = 1×P1 + 2×P2 + 3×P3 + 4×P4
  - 授業評価スコアは期待値から計算（回帰ヘッド不要）

**位置づけ**: 順序回帰モデルはマルチタスク学習の一種であり、従来のマルチタスク学習の課題（順序性の無視、2点・4点の要因分離の困難）を解決した改善版である。

---

### 3.3 順序回帰の実装

#### 3.3.1 CORAL型順序回帰

**ここにあなたが書いた内容を貼り付けてください**

- 累積ロジット: $p_{\geq 2}$, $p_{\geq 3}$, $p_{\geq 4}$
- 確率分布の復元:
  - $P_1 = 1 - p_{\geq 2}$
  - $P_2 = p_{\geq 2} - p_{\geq 3}$
  - $P_3 = p_{\geq 3} - p_{\geq 4}$
  - $P_4 = p_{\geq 4}$

---

#### 3.3.2 損失関数

**ここにあなたが書いた内容を貼り付けてください**

- KL Divergence（順序回帰の主目的）: 回答者数で重み付け
- MSE（感情スコア、補助情報）: 重み $\alpha = 0.3$
- 総損失: $L = L_{KL} + \alpha \cdot L_{MSE}$

---

### 3.4 評価指標

**ここにあなたが書いた内容を貼り付けてください**

- Weighted KL Divergence: 確率分布の予測精度
- 期待値E[y]のRMSE, MAE, R²: 期待値の予測精度
- 感情スコアのRMSE, MAE, R²: 感情スコアの予測精度
- 順序性の評価: 順序一致率、順序距離誤差

---

## 第4章 実験結果

### 4.1 順序回帰モデルの学習結果

**ここにあなたが書いた内容を貼り付けてください**

#### 学習結果
- **Test weighted KL**: 0.0935
- **モデルファイル**: `class_level_ordinal_llp_20260114_101852.pth`
- **学習設定**:
  - エポック数: 3
  - バッチサイズ: 2
  - 学習率: 2e-5
  - ベースモデル: koheiduck/bert-japanese-finetuned-sentiment

#### モデルの特徴
- 確率分布（P1～P4）を直接予測
- 期待値E[y] = 1×P1 + 2×P2 + 3×P3 + 4×P4を計算可能
- 各評価段階での要因分析が可能

---

### 4.2 従来のマルチタスク学習との比較

**ここにあなたが書いた内容を貼り付けてください**

#### 比較項目
- 順序性の保証: 順序回帰モデルは構造的に保証
- 確率分布の予測: 順序回帰モデルは直接予測可能
- 要因分析の深化: 各評価段階（P1～P4）での要因を詳細に分析可能

---

### 4.3 各評価段階での要因分析（SHAP分析）

**ここにあなたが書いた内容を貼り付けてください**

#### 4.3.1 P2（中低評価確率）への寄与

**分析目的**: 2点を減らす要因を特定（教師の最重要課題）

**結果**: [SHAP分析実行後に記入]
- 重要語TOP10: [結果を記入]
- カテゴリ分類: [結果を記入]

---

#### 4.3.2 P4（高評価確率）への寄与

**分析目的**: 4点を増やす要因を特定

**結果**: [SHAP分析実行後に記入]
- 重要語TOP10: [結果を記入]
- カテゴリ分類: [結果を記入]

---

#### 4.3.3 P2とP4の比較

**分析目的**: 2点を減らす要因と4点を増やす要因の違いを明確化

**結果**: [SHAP分析実行後に記入]
- 共通要因: [結果を記入]
- P2特化要因: [結果を記入]
- P4特化要因: [結果を記入]

---

## 第5章 考察

### 5.1 順序回帰モデルの意義

**ここにあなたが書いた内容を貼り付けてください**

#### 方法論的貢献
- マルチタスク学習の改善版として、順序性を構造的に保証
- 確率分布を直接予測することで、各評価段階での要因を詳細に分析可能
- 2種類の要因分離を実現：
  1. 各評価段階を分ける要因（4, 3, 2, 1の分離）
  2. 高評価と低評価を分ける要因（4・3と2・1の分離）

---

### 5.2 教師の視点に立った改善提案

**ここにあなたが書いた内容を貼り付けてください**

#### 平均3点の改善戦略
- **2点を減らす要因**: P2（中低評価確率）への寄与が高い要因を回避・改善
- **4点を増やす要因**: P4（高評価確率）への寄与が高い要因を重視
- **実用的な改善提案**: [SHAP分析結果に基づいて記入]

---

### 5.3 限界と今後の課題

**ここにあなたが書いた内容を貼り付けてください**

---

## 第6章 おわりに

### 6.1 研究のまとめ

**ここにあなたが書いた内容を貼り付けてください**

---

### 6.2 今後の展望

**ここにあなたが書いた内容を貼り付けてください**

---

## 📝 執筆のガイドライン

### 文体
- **文語体「である」調**を使用（口語体は厳禁）
- **客観的で簡潔な表現**を心がける
- **主語を明確に**する（「本研究では」「順序回帰モデルにより」など）

### 数値の記述
- **統計的有意性を必ず明記**（p値、信頼区間など）
- **単位を必ず記述**する（例：3.459点、0.216標準偏差）
- **範囲を示す場合は明確に**（例：3.330～3.600点）

### 図表の扱い
- **図のキャプションは図の下**に配置
- **表のキャプションは表の上**に配置
- **解像度は300dpi以上**（印刷品質）
- **本文中で必ず参照**する（「図1に示すように」「表1の通り」）

### 数式の扱い
- **重要な数式には必ず番号を付与**
- **変数は必ず定義**する
- **本文中で参照**する（「式(1)に示すように」）

---

## 🎯 執筆の進め方

1. **各セクションに「ここにあなたが書いた内容を貼り付けてください」と書いてある部分に、あなたが書いた内容を貼り付けてください**
2. **私が内容を整理・修正します**
3. **LaTeX形式に変換します**

---

**最終更新**: 2025年1月14日

